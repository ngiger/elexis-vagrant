#!/usr/bin/env ruby
#
# Copyright (c) Niklaus Giger niklaus.giger@member.fsf.org
#
# Some utilities for the pg_utility Ruby scripts

def system(cmd)
  puts cmd if $VERBOSE
  res = Kernel.system(cmd)
  unless res
    logAction("cmd: #{cmd} failed! Will exit with error")
    exit 1
  end
end

$startTime = Time.now

def logAction(msg)
  full = "logger '#{$0}: running for #{(Time.now - $startTime).to_i} seconds: #{msg}'"
  puts(full)
  Kernel.system(full)
end
